(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{3208:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(9787)}])},9787:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(5893),o=t(9008),a=t.n(o),s=t(5202),i=t.n(s),c=t(7294),l=t(9808),u=t.n(l),d=t(1163),p=t(1664),m=t.n(p),f=t(9548),h=t(1955);function g(){let{isAuthenticated:e,updateAuthStatus:n,updateUserId:t}=(0,c.useContext)(f.V),[o,a]=(0,c.useState)(null),[s,i]=(0,c.useState)(!1),l=(0,d.useRouter)(),p=(0,c.useRef)(),g=(0,c.useRef)(),_=async r=>{r.preventDefault(),console.log(e),i(!0),console.log("In Handle Login"),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.current.value,password:g.current.value})}).then(e=>{if(400===e.status&&a(e.message),200!==e.status&&400!==e.status)throw Error("Something went wrong!!!");return e.json()}).then(e=>{if("Please enter valid credentials."===e.message)a("Please enter valid email."),g.current.value="";else if("Incorrect password."===e.message)a("Incorrect password.");else{console.log(e),console.log("Login successful"),localStorage.setItem("userId",JSON.stringify(e.userId)),n(!0),t(e.userId),i(!1);let r=encodeURIComponent(""),o=encodeURIComponent(""),a=encodeURIComponent(""),s=encodeURIComponent(""),c="/dashboard?age=".concat(r,"&gender=").concat(o,"&startDate=").concat(a,"&endDate=").concat(s),u=h.Z.get("paramsUrl");u?(h.Z.remove("paramsUrl"),console.log(u),l.replace(JSON.parse(u))):l.replace(c)}}).catch(e=>{console.error("Login error:",e)}),i(!1)};return(0,r.jsx)("div",{className:u().formContainer,children:(0,r.jsxs)("form",{className:u().authForm,onSubmit:_,children:[(0,r.jsx)("p",{className:u().formName,children:"Login"}),o&&(0,r.jsx)("p",{className:u().errorMessage,children:o}),(0,r.jsx)("input",{className:"Please enter valid email."===o?u().errorField:void 0,type:"email",name:"email",id:"email",placeholder:"Email Address",ref:p,required:!0}),(0,r.jsx)("input",{className:"Incorrect password."===o?u().errorField:void 0,type:"password",name:"password",id:"password",placeholder:"Password",ref:g,required:!0}),(0,r.jsx)("button",{disabled:s,children:s?(0,r.jsx)("img",{className:u().loadingGIF,src:"/loading.gif",alt:"loading..."}):"Login"}),(0,r.jsxs)("p",{children:["Don't have an account? ",(0,r.jsx)(m(),{href:"/auth/",children:"Sign Up"})]})]})})}function _(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Log in"}),(0,r.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=New+Amsterdam&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap",rel:"stylesheet"})]}),(0,r.jsx)("main",{className:i().main,children:(0,r.jsx)(g,{})})]})}},5202:function(e){e.exports={heroContent:"Home_heroContent__IGkft",WebsiteName:"Home_WebsiteName__pK4Rr",appDesc:"Home_appDesc__MwsD8"}},9808:function(e){e.exports={main:"auth_main__BfsrI",formContainer:"auth_formContainer__bWsfr",authForm:"auth_authForm__ZZpD_",formName:"auth_formName__1Dlzv","auth-form-container":"auth_auth-form-container__5H1rB",errorField:"auth_errorField__0wei_",errorMessage:"auth_errorMessage__cU_1K",loadingGIF:"auth_loadingGIF__MvpT5"}},1163:function(e,n,t){e.exports=t(3079)},1955:function(e,n,t){"use strict";function r(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}t.d(n,{Z:function(){return o}});var o=function e(n,t){function o(e,o,a){if("undefined"!=typeof document){"number"==typeof(a=r({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in a)a[i]&&(s+="; "+i,!0!==a[i]&&(s+="="+a[i].split(";")[0]));return document.cookie=e+"="+n.write(o,e)+s}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var a=t[o].split("="),s=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(r[i]=n.read(s,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,n){o(e,"",r({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,r({},this.attributes,n))},withConverter:function(n){return e(r({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=3208)}),_N_E=e.O()}]);